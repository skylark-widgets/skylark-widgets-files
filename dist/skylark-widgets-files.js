/**
 * skylark-widgets-files - The skylark file widgets library
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-widgets/skylark-widgets-files/
 * @license MIT
 */
!function(e,t){var i=t.define,require=t.require,s="function"==typeof i&&i.amd,n=!s&&"undefined"!=typeof exports;if(!s&&!i){var r={};i=t.define=function(e,t,i){"function"==typeof i?(r[e]={factory:i,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var i=t.split("/"),s=e.split("/");i.pop();for(var n=0;n<s.length;n++)"."!=s[n]&&(".."==s[n]?i.pop():i.push(s[n]));return i.join("/")}(t,e)}),resolved:!1,exports:null},require(e)):r[e]={factory:null,resolved:!0,exports:i}},require=t.require=function(e){if(!r.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=r[e];if(!module.resolved){var i=[];module.deps.forEach(function(e){i.push(require(e))}),module.exports=module.factory.apply(t,i)||null,module.resolved=!0}return module.exports}}if(!i)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-widgets-files/files",["skylark-langx/skylark"],function(e){return e.attach("widgets.files",{})}),e("skylark-widgets-files/ImageChooser",["skylark-widgets-base/Widget","skylark-io-diskfs/select","./files"],function(e,t,i){"use strict";var s=e.inherit({_construct:function(i){e.prototype._construct.call(this,i,"div");var s=this.getSkin();this.img=document.createWidget("img"),this.img.style.visibility="inherit",this.img.style.position="absolute",this.img.style.borderStyle="none",this.img.style.left="0px",this.img.style.top="0px",this.img.style.width="100%",this.img.style.height="100%",this.img.style.objectFit="contain",this.img.style.backgroundImage='url("'+s.alphaImageUrl+'")',this.img.style.backgroundRepeat="repeat",this.img.style.backgroundSize="120px 120px",this._elm.appendChild(this.img),this.value=null;var n=this;this._elm.ondragover=e.preventDefault,this._elm.ondragstart=e.preventDefault,this._elm.ondrop=function(e){if(e.preventDefault(),e.dataTransfer.files.length>0){var t=e.dataTransfer.files[0];Image.fileIsImage(t)&&r(t)}else{var i=e.dataTransfer.getData("uuid"),s=DragBuffer.get(i);s instanceof Image?(n.setValue(s),n.onChange(s)):Editor.alert("Only images accepted")}},this._elm.onclick=function(){null!==n.onChange&&t({picked:function(e){e.length>0&&r(e[0])}})};var r=function(e){var t=new FileReader;t.onload=function(){n.setValue(new Image(t.result)),n.onChange(n.value)},t.readAsDataURL(e)};this.onChange=null},setOnChange:function(e){this.onChange=e,this.img.style.cursor="pointer"},setValue:function(e){this.value=e,this.img.src=e.data},getValue:function(){return this.value}});return i.ImageChooser=s}),e("skylark-widgets-files/main",["./files","./ImageChooser"],function(e){return e}),e("skylark-widgets-files",["skylark-widgets-files/main"],function(e){return e})}(i),!s){var a=require("skylark-langx-ns");n?module.exports=a:t.skylarkjs=a}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-widgets-files.js.map
